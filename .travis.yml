language: generic
addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - gfortran-7
before_script:
  - export DISTROOT=. BUILDROOT=../build FC=gfortran-7 CMAKE=cmake
  - ./scripts/build-json-fortran.sh
  - cmake -H$DISTROOT -B$BUILDROOT
  - cmake --build $BUILDROOT
script:
  - cd $BUILDROOT
  - ./bin/config
  - ctest
notifications:
email: false
after_success:
 - bash <(curl -s https://codecov.io/bash)
